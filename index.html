<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أسعار الذهب الحية بالريال العماني - [اسم المحل]</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* الألوان: ذهبي (Gold), خلفية داكنة (Dark), تركيز (Accent) */
        :root {
            --dark-bg: #1e1e2f;
            --card-bg: #2c2c3e;
            --gold: #FFD700;
            --text-light: #f0f0f0;
            --text-dim: #b0b0b0;
            --accent: #5C6BC0; /* لون ثانوي */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', sans-serif; /* خط عربي حديث */
            background-color: var(--dark-bg);
            color: var(--text-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: right; /* محاذاة النص لليمين للغة العربية */
        }

        .container {
            width: 90%;
            max-width: 800px;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            border-bottom: 2px solid var(--accent);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            color: var(--gold);
            margin: 0;
            font-weight: 700;
        }

        .date-time {
            font-size: 1em;
            color: var(--text-dim);
            margin-top: 5px;
        }

        .price-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: space-between;
        }

        .price-card {
            flex: 1 1 calc(50% - 15px); /* بطاقتان في كل سطر */
            min-width: 250px;
            background-color: #383850;
            padding: 20px;
            border-radius: 10px;
            border-right: 5px solid var(--gold);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .price-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .karat {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 5px;
        }

        .price {
            font-size: 2.2em;
            color: var(--text-light);
            font-weight: 700;
            direction: ltr; /* لعرض الأرقام بالإنجليزية بشكل صحيح */
        }
        
        .price span {
            font-size: 0.5em;
            color: var(--text-dim);
            margin-right: 5px;
        }

        .note {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px dashed var(--accent);
            font-size: 0.9em;
            color: var(--text-dim);
            text-align: center;
        }

        .loading {
            text-align: center;
            font-size: 1.5em;
            padding: 50px;
            color: var(--gold);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>✨ أسعار الذهب الحية في [اسم المحل]</h1>
            <div class="date-time" id="dateTime"></div>
        </div>

        <div class="price-list" id="priceList">
            <div class="loading">جاري تحميل أسعار الذهب...</div>
        </div>

        <div class="note">
            <p>الأسعار تقريبية وتعتمد على سعر الأونصة العالمي، وهي بالريال العماني (OMR) لكل جرام. قد تختلف الأسعار النهائية في المتجر.</p>
        </div>
    </div>

    <script>
        // *** الجزء الذي يجب تحديثه ببيانات API مجانية وحديثة ***
        // مثال: افتراض استخدام واجهة API مجانية (مثل CoinGecko لسعر XAU/USD و OMR/USD)
        // للعرض الاحترافي، قد تحتاج إلى خدمة مثل Metals-API (الخطة المجانية)،
        // أو Gold Price API (الخطة المجانية)، أو Fixer/Exchangerate.host لسعر الصرف + سعر الذهب من مصدر آخر.
        
        // للاحترافية والاعتمادية، يفضل استخدام مفتاح API مجاني من مزود موثوق مثل Metals-API (خطة مجانية محدودة)
        // لتجنب الحاجة لجلب سعرين مختلفين.
        
        // مثال على جلب سعر الذهب بالدولار وسعر الصرف OMR/USD (للتوضيح)
        const GOLD_API_URL = 'https://api.coingecko.com/api/v3/simple/price?ids=gold&vs_currencies=usd'; // سعر الذهب (أونصة) بالدولار
        const FX_API_URL = 'https://api.exchangerate.host/latest?base=USD&symbols=OMR'; // سعر الدولار مقابل الريال العماني (OMR/USD)
        
        // هذه التسمية للمتغيرات هي لتعريف قيم تقريبية في حال فشل الـ API
        const OUNCE_GRAM = 31.1035; // عدد الجرامات في الأونصة الواحدة

        function updateDateTime() {
            const now = new Date();
            const date = now.toLocaleDateString('ar-SA', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            const time = now.toLocaleTimeString('ar-SA');
            document.getElementById('dateTime').textContent = `آخر تحديث: ${date} - ${time}`;
        }

        async function fetchGoldData() {
            const priceListElement = document.getElementById('priceList');
            priceListElement.innerHTML = '<div class="loading">جاري تحميل أسعار الذهب...</div>';
            
            try {
                // 1. جلب سعر الأونصة بالدولار (XAU/USD)
                const goldResponse = await fetch(GOLD_API_URL);
                const goldData = await goldResponse.json();
                const goldPriceUSDPerOunce = goldData.gold.usd;

                // 2. جلب سعر الصرف (USD/OMR)
                const fxResponse = await fetch(FX_API_URL);
                const fxData = await fxResponse.json();
                const OMRRate = fxData.rates.OMR; // كم يساوي الدولار الواحد بالريال العماني (USD/OMR)
                const OMRPerUSD = 1 / OMRRate; // كم يساوي الريال العماني بالدولار (OMR/USD)
                
                // 3. التحويل والحساب
                const goldPriceOMRPerOunce = goldPriceUSDPerOunce * OMRRate;
                const goldPriceOMRPerGram_24K = goldPriceOMRPerOunce / OUNCE_GRAM;

                // 4. حساب أسعار القيراط الأخرى
                const prices = {
                    '24 قيراط': goldPriceOMRPerGram_24K,
                    '22 قيراط': goldPriceOMRPerGram_24K * (22 / 24),
                    '21 قيراط': goldPriceOMRPerGram_24K * (21 / 24),
                    '18 قيراط': goldPriceOMRPerGram_24K * (18 / 24),
                };
                
                // 5. عرض النتائج
                let html = '';
                for (const karat in prices) {
                    const price = prices[karat].toFixed(3);
                    html += `
                        <div class="price-card">
                            <div class="karat">${karat}</div>
                            <div class="price">${price} <span>OMR / جرام</span></div>
                        </div>
                    `;
                }
                priceListElement.innerHTML = html;

            } catch (error) {
                console.error("Error fetching gold data:", error);
                priceListElement.innerHTML = '<div class="loading" style="color: #F44336;">⚠️ خطأ في جلب البيانات. قد تحتاج إلى تحديث مفاتيح الـ API أو استخدام واجهة أخرى.</div>';
            }
        }

        // --- بدء التشغيل ---
        updateDateTime();
        setInterval(updateDateTime, 1000); // تحديث الوقت كل ثانية

        fetchGoldData();
        // التحديث كل 5 دقائق (300,000 مللي ثانية)
        setInterval(fetchGoldData, 300000); 

        window.onload = fetchGoldData;
    </script>
</body>
</html>
